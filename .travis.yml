language: generic

env:
  global:
    - CPPFLAGS="-DH5_NO_DEPRECATED_SYMBOLS"
    - CXXFLAGS="-Wno-deprecated -Wno-deprecated-declarations -Wimplicit  -Wimplicit-function-declaration  -Wimplicit-int"
    - CFLAGS="-Wno-deprecated -Wno-deprecated-declarations -Wimplicit  -Wimplicit-function-declaration  -Wimplicit-int"
    - LD_LIBRARY_PATH='/usr/local/lib'
    - PKG_CONFIG_PATH='/usr/local/lib/pkgconfig'
    - GTKMM_PLPLOT_BRANCH='plot-objects'

matrix:
  include:

    # trusty: fgsl and gtkmm-plplot
    # no updater
    # with gui
    # no notifications
    - os: linux
      sudo: required
      dist: trusty
      addons:
        apt:
          sources:
            - sourceline: 'deb [arch=amd64] http://xmi-apt.tomschoonjans.eu/ubuntu trusty stable'
              key_url: 'http://xmi-apt.tomschoonjans.eu/xmi.packages.key'
          packages:
            - libgsl0-dev
            - libfgsl0
            - libfgsl0-dev
            - libgtkmm-plplot2
            - libgtkmm-plplot2-dev
            - gfortran
            - libxslt1-dev
            - libxml2-utils
            - libhdf5-serial-dev
            - hdf5-tools
            - libxrl7-dev
            - libsoup2.4-dev
      env: EXTRA='--enable-gui --disable-updater --disable-libnotify'
    # trusty: fgsl and gtkmm-plplot
    # with updater
    # with gui
    # with notifications
    - os: linux
      sudo: required
      dist: trusty
      addons:
        apt:
          sources:
            - sourceline: 'deb [arch=amd64] http://xmi-apt.tomschoonjans.eu/ubuntu trusty stable'
              key_url: 'http://xmi-apt.tomschoonjans.eu/xmi.packages.key'
          packages:
            - libgsl0-dev
            - libfgsl0
            - libfgsl0-dev
            - libgtkmm-plplot2
            - libgtkmm-plplot2-dev
            - gfortran
            - libxslt1-dev
            - libxml2-utils
            - libhdf5-serial-dev
            - hdf5-tools
            - libxrl7-dev
            - libsoup2.4-dev
            - libjson-glib-dev
            - libnotify-dev
      env: EXTRA='--enable-gui --enable-updater --enable-libnotify'
    # trusty: fgsl
    # no updater
    # no gui
    # no notifications
    - os: linux
      sudo: required
      dist: trusty
      addons:
        apt:
          sources:
            - sourceline: 'deb [arch=amd64] http://xmi-apt.tomschoonjans.eu/ubuntu trusty stable'
              key_url: 'http://xmi-apt.tomschoonjans.eu/xmi.packages.key'
          packages:
            - libgsl0-dev
            - libfgsl0
            - libfgsl0-dev
            - gfortran
            - libxslt1-dev
            - libxml2-utils
            - libhdf5-serial-dev
            - hdf5-tools
            - libxrl7-dev
            - libsoup2.4-dev
      env: EXTRA='--disable-gui --disable-updater --disable-libnotify'
    # trusty: easyRNG and gtkmm-plplot
    # no updater
    # with gui
    # no notifications
    - os: linux
      sudo: required
      dist: trusty
      addons:
        apt:
          sources:
            - sourceline: 'deb [arch=amd64] http://xmi-apt.tomschoonjans.eu/ubuntu trusty stable'
              key_url: 'http://xmi-apt.tomschoonjans.eu/xmi.packages.key'
            - ubuntu-toolchain-r-test
          packages:
            - libgtkmm-plplot2
            - libgtkmm-plplot2-dev
            - gfortran-5
            - gcc-5
            - g++-5
            - libxslt1-dev
            - libxml2-utils
            - libhdf5-serial-dev
            - hdf5-tools
            - libsoup2.4-dev
      env: EXTRA='--enable-gui --disable-updater --disable-libnotify' CC='gcc-5' CXX='g++-5' FC='gfortran-5' BUILD_XRL_AND_EASYRNG_FROM_SOURCE='yes'
    # trusty: easyRNG and gtkmm-plplot
    # with updater
    # with gui
    # with notifications
    - os: linux
      sudo: required
      dist: trusty
      addons:
        apt:
          sources:
            - sourceline: 'deb [arch=amd64] http://xmi-apt.tomschoonjans.eu/ubuntu trusty stable'
              key_url: 'http://xmi-apt.tomschoonjans.eu/xmi.packages.key'
            - ubuntu-toolchain-r-test
          packages:
            - libgtkmm-plplot2
            - libgtkmm-plplot2-dev
            - gfortran-5
            - gcc-5
            - g++-5
            - libxslt1-dev
            - libxml2-utils
            - libhdf5-serial-dev
            - hdf5-tools
            - libsoup2.4-dev
            - libjson-glib-dev
            - libnotify-dev
      env: EXTRA='--enable-gui --enable-updater --enable-libnotify' CC='gcc-5' CXX='g++-5' FC='gfortran-5' BUILD_XRL_AND_EASYRNG_FROM_SOURCE='yes'
    # trusty: easyRNG 
    # no updater
    # no gui
    # no notifications
    - os: linux
      sudo: required
      dist: trusty
      addons:
        apt:
          sources:
            - sourceline: 'deb [arch=amd64] http://xmi-apt.tomschoonjans.eu/ubuntu trusty stable'
              key_url: 'http://xmi-apt.tomschoonjans.eu/xmi.packages.key'
            - ubuntu-toolchain-r-test
          packages:
            - gfortran-5
            - gcc-5
            - libxslt1-dev
            - libxml2-utils
            - libhdf5-serial-dev
            - hdf5-tools
            - libsoup2.4-dev
      env: EXTRA='--disable-gui --disable-updater --disable-libnotify' CC='gcc-5' FC='gfortran-5' BUILD_XRL_AND_EASYRNG_FROM_SOURCE='yes'
    # trusty: easyRNG and gtkmm-plplot
    # no updater
    # with gui
    # no notifications
    - os: linux
      sudo: required
      dist: trusty
      addons:
        apt:
          sources:
            - sourceline: 'deb [arch=amd64] http://xmi-apt.tomschoonjans.eu/ubuntu trusty stable'
              key_url: 'http://xmi-apt.tomschoonjans.eu/xmi.packages.key'
            - ubuntu-toolchain-r-test
          packages:
            - libgtkmm-plplot2
            - libgtkmm-plplot2-dev
            - gfortran-6
            - gcc-6
            - g++-6
            - libxslt1-dev
            - libxml2-utils
            - libhdf5-serial-dev
            - hdf5-tools
            - libsoup2.4-dev
      env: EXTRA='--enable-gui --disable-updater --disable-libnotify' CC='gcc-6' CXX='g++-6' FC='gfortran-6' BUILD_XRL_AND_EASYRNG_FROM_SOURCE='yes'
    # trusty: easyRNG and gtkmm-plplot
    # with updater
    # with gui
    # with notifications
    - os: linux
      sudo: required
      dist: trusty
      addons:
        apt:
          sources:
            - sourceline: 'deb [arch=amd64] http://xmi-apt.tomschoonjans.eu/ubuntu trusty stable'
              key_url: 'http://xmi-apt.tomschoonjans.eu/xmi.packages.key'
            - ubuntu-toolchain-r-test
          packages:
            - libgtkmm-plplot2
            - libgtkmm-plplot2-dev
            - gfortran-6
            - gcc-6
            - g++-6
            - libxslt1-dev
            - libxml2-utils
            - libhdf5-serial-dev
            - hdf5-tools
            - libsoup2.4-dev
            - libjson-glib-dev
            - libnotify-dev
      env: EXTRA='--enable-gui --enable-updater --enable-libnotify' CC='gcc-6' CXX='g++-6' FC='gfortran-6' BUILD_XRL_AND_EASYRNG_FROM_SOURCE='yes'
    # trusty: easyRNG 
    # no updater
    # no gui
    # no notifications
    - os: linux
      sudo: required
      dist: trusty
      addons:
        apt:
          sources:
            - sourceline: 'deb [arch=amd64] http://xmi-apt.tomschoonjans.eu/ubuntu trusty stable'
              key_url: 'http://xmi-apt.tomschoonjans.eu/xmi.packages.key'
            - ubuntu-toolchain-r-test
          packages:
            - gfortran-6
            - gcc-6
            - libxslt1-dev
            - libxml2-utils
            - libhdf5-serial-dev
            - hdf5-tools
            - libsoup2.4-dev
      env: EXTRA='--disable-gui --disable-updater --disable-libnotify' CC='gcc-6' FC='gfortran-6' BUILD_XRL_AND_EASYRNG_FROM_SOURCE='yes'
    # trusty: easyRNG and gtkmm-plplot
    # no updater
    # with gui
    # no notifications
    - os: linux
      sudo: required
      dist: trusty
      addons:
        apt:
          sources:
            - sourceline: 'deb [arch=amd64] http://xmi-apt.tomschoonjans.eu/ubuntu trusty stable'
              key_url: 'http://xmi-apt.tomschoonjans.eu/xmi.packages.key'
            - ubuntu-toolchain-r-test
          packages:
            - libgtkmm-plplot2
            - libgtkmm-plplot2-dev
            - gfortran-4.9
            - gcc-4.9
            - g++-4.9
            - libxslt1-dev
            - libxml2-utils
            - libhdf5-serial-dev
            - hdf5-tools
            - libsoup2.4-dev
      env: EXTRA='--enable-gui --disable-updater --disable-libnotify' CC='gcc-4.9' CXX='g++-4.9' FC='gfortran-4.9' BUILD_XRL_AND_EASYRNG_FROM_SOURCE='yes'
    # trusty: easyRNG and gtkmm-plplot
    # with updater
    # with gui
    # with notifications
    - os: linux
      sudo: required
      dist: trusty
      addons:
        apt:
          sources:
            - sourceline: 'deb [arch=amd64] http://xmi-apt.tomschoonjans.eu/ubuntu trusty stable'
              key_url: 'http://xmi-apt.tomschoonjans.eu/xmi.packages.key'
            - ubuntu-toolchain-r-test
          packages:
            - libgtkmm-plplot2
            - libgtkmm-plplot2-dev
            - gfortran-4.9
            - gcc-4.9
            - g++-4.9
            - libxslt1-dev
            - libxml2-utils
            - libhdf5-serial-dev
            - hdf5-tools
            - libsoup2.4-dev
            - libjson-glib-dev
            - libnotify-dev
      env: EXTRA='--enable-gui --enable-updater --enable-libnotify' CC='gcc-4.9' CXX='g++-4.9' FC='gfortran-4.9' BUILD_XRL_AND_EASYRNG_FROM_SOURCE='yes'
    # trusty: easyRNG 
    # no updater
    # no gui
    # no notifications
    - os: linux
      sudo: required
      dist: trusty
      addons:
        apt:
          sources:
            - sourceline: 'deb [arch=amd64] http://xmi-apt.tomschoonjans.eu/ubuntu trusty stable'
              key_url: 'http://xmi-apt.tomschoonjans.eu/xmi.packages.key'
            - ubuntu-toolchain-r-test
          packages:
            - gfortran-4.9
            - gcc-4.9
            - libxslt1-dev
            - libxml2-utils
            - libhdf5-serial-dev
            - hdf5-tools
            - libsoup2.4-dev
      env: EXTRA='--disable-gui --disable-updater --disable-libnotify' CC='gcc-4.9' FC='gfortran-4.9' BUILD_XRL_AND_EASYRNG_FROM_SOURCE='yes'
    # trusty: fgsl
    # no updater
    # no gui
    # no notifications
    # with MPI!!!
    - os: linux
      sudo: required
      dist: trusty
      addons:
        apt:
          sources:
            - sourceline: 'deb [arch=amd64] http://xmi-apt.tomschoonjans.eu/ubuntu trusty stable'
              key_url: 'http://xmi-apt.tomschoonjans.eu/xmi.packages.key'
          packages:
            - libgsl0-dev
            - libfgsl0
            - libfgsl0-dev
            - gfortran
            - libxslt1-dev
            - libxml2-utils
            - libhdf5-serial-dev
            - hdf5-tools
            - libxrl7-dev
            - libsoup2.4-dev
            - libopenmpi-dev
            - openmpi-bin
      env: EXTRA='--disable-gui --disable-updater --disable-libnotify --enable-mpi'
    ###
    ###
    ### Mac OS X
    ###
    ###
    # OS X 10.11 El Capitan: fgsl
    # no gui
    # no openCL
    - os: osx
      sudo: required
      osx_image: xcode7.3 # OS X 10.11 El Capitan
      env: EXTRA='--disable-gui --disable-updater --disable-mac-integration --disable-opencl' MYCC='/usr/local/opt/llvm/bin/clang' MYCXX='/usr/local/opt/llvm/bin/clang++' MYFC='gfortran' HOMEBREW_GCC='gcc llvm' MYLIBS='-L/usr/local/opt/llvm/lib -Wl,-rpath,/usr/local/opt/llvm/lib' BUILD_XRL_AND_FGSL_FROM_SOURCE='yes'

    # OS X 10.11 El Capitan: fgsl
    # no gui
    # with openCL
    - os: osx
      sudo: required
      osx_image: xcode7.3 # OS X 10.11 El Capitan
      env: EXTRA='--disable-gui --disable-updater --disable-mac-integration --enable-opencl' MYCC='/usr/local/opt/llvm/bin/clang' MYCXX='/usr/local/opt/llvm/bin/clang++' MYFC='gfortran' HOMEBREW_GCC='gcc llvm' MYLIBS='-L/usr/local/opt/llvm/lib -Wl,-rpath,/usr/local/opt/llvm/lib' BUILD_XRL_AND_FGSL_FROM_SOURCE='yes'

    # OS X 10.11 El Capitan: easyRNG
    # no gui
    # no openCL
    - os: osx
      sudo: required
      osx_image: xcode7.3 # OS X 10.11 El Capitan
      env: EXTRA='--disable-gui --disable-updater --disable-mac-integration --disable-opencl' MYCC='/usr/local/opt/llvm/bin/clang' MYCXX='/usr/local/opt/llvm/bin/clang++' MYFC='gfortran' HOMEBREW_GCC='gcc llvm' MYLIBS='-L/usr/local/opt/llvm/lib -Wl,-rpath,/usr/local/opt/llvm/lib' BUILD_XRL_AND_EASYRNG_FROM_SOURCE='yes'

    # OS X 10.11 El Capitan: easyRNG
    # no gui
    # with openCL
    - os: osx
      sudo: required
      osx_image: xcode7.3 # OS X 10.11 El Capitan
      env: EXTRA='--disable-gui --disable-updater --disable-mac-integration --enable-opencl' MYCC='/usr/local/opt/llvm/bin/clang' MYCXX='/usr/local/opt/llvm/bin/clang++' MYFC='gfortran' HOMEBREW_GCC='gcc llvm' MYLIBS='-L/usr/local/opt/llvm/lib -Wl,-rpath,/usr/local/opt/llvm/lib' BUILD_XRL_AND_EASYRNG_FROM_SOURCE='yes'

    # OS X 10.11 El Capitan: easyRNG
    # with gui
    # no updater
    # no mac-integration
    # no openCL
    # no google analytics
    - os: osx
      sudo: required
      osx_image: xcode7.3 # OS X 10.11 El Capitan
      env: EXTRA='--enable-gui --disable-updater --disable-mac-integration --disable-opencl --disable-google-analytics' HOMEBREW_EXTRA='tschoonj/tap/gtkmm-plplot' MYCC='/usr/local/opt/llvm/bin/clang' MYCXX='/usr/local/opt/llvm/bin/clang++' MYFC='gfortran' HOMEBREW_GCC='gcc llvm' MYLIBS='-L/usr/local/opt/llvm/lib -Wl,-rpath,/usr/local/opt/llvm/lib' BUILD_XRL_AND_EASYRNG_FROM_SOURCE='yes'

    # OS X 10.11 El Capitan: easyRNG
    # with gui
    # with updater
    # with mac-integration
    # no openCL
    # no google analytics
    - os: osx
      sudo: required
      osx_image: xcode7.3 # OS X 10.11 El Capitan
      env: EXTRA='--enable-gui --enable-updater --enable-mac-integration --disable-opencl --disable-google-analytics' HOMEBREW_EXTRA='tschoonj/tap/gtkmm-plplot json-glib gtk-mac-integration' MYCC='/usr/local/opt/llvm/bin/clang' MYCXX='/usr/local/opt/llvm/bin/clang++' MYFC='gfortran' HOMEBREW_GCC='gcc llvm' MYLIBS='-L/usr/local/opt/llvm/lib -Wl,-rpath,/usr/local/opt/llvm/lib' BUILD_XRL_AND_EASYRNG_FROM_SOURCE='yes'

    # OS X 10.11 El Capitan: easyRNG
    # with gui
    # no updater
    # no mac-integration
    # with openCL
    # no google analytics
    - os: osx
      sudo: required
      osx_image: xcode7.3 # OS X 10.11 El Capitan
      env: EXTRA='--enable-gui --disable-updater --disable-mac-integration --enable-opencl --disable-google-analytics' HOMEBREW_EXTRA='tschoonj/tap/gtkmm-plplot' MYCC='/usr/local/opt/llvm/bin/clang' MYCXX='/usr/local/opt/llvm/bin/clang++' MYFC='gfortran' HOMEBREW_GCC='gcc llvm' MYLIBS='-L/usr/local/opt/llvm/lib -Wl,-rpath,/usr/local/opt/llvm/lib' BUILD_XRL_AND_EASYRNG_FROM_SOURCE='yes'

    # OS X 10.11 El Capitan: easyRNG
    # with gui
    # with updater
    # with mac-integration
    # with openCL
    # no google analytics
    - os: osx
      sudo: required
      osx_image: xcode7.3 # OS X 10.11 El Capitan
      env: EXTRA='--enable-gui --enable-updater --enable-mac-integration --enable-opencl --disable-google-analytics' HOMEBREW_EXTRA='tschoonj/tap/gtkmm-plplot json-glib gtk-mac-integration' MYCC='/usr/local/opt/llvm/bin/clang' MYCXX='/usr/local/opt/llvm/bin/clang++' MYFC='gfortran' HOMEBREW_GCC='gcc llvm' MYLIBS='-L/usr/local/opt/llvm/lib -Wl,-rpath,/usr/local/opt/llvm/lib' BUILD_XRL_AND_EASYRNG_FROM_SOURCE='yes'

    # OS X 10.11 El Capitan: easyRNG
    # with gui
    # no updater
    # no mac-integration
    # no openCL
    # with google analytics
    - os: osx
      sudo: required
      osx_image: xcode7.3 # OS X 10.11 El Capitan
      env: EXTRA='--enable-gui --disable-updater --disable-mac-integration --disable-opencl --enable-google-analytics' HOMEBREW_EXTRA='tschoonj/tap/gtkmm-plplot' MYCC='/usr/local/opt/llvm/bin/clang' MYCXX='/usr/local/opt/llvm/bin/clang++' MYFC='gfortran' HOMEBREW_GCC='gcc llvm' MYLIBS='-L/usr/local/opt/llvm/lib -Wl,-rpath,/usr/local/opt/llvm/lib' BUILD_XRL_AND_EASYRNG_FROM_SOURCE='yes'

    # OS X 10.11 El Capitan: easyRNG
    # with gui
    # with updater
    # with mac-integration
    # no openCL
    # with google analytics
    - os: osx
      sudo: required
      osx_image: xcode7.3 # OS X 10.11 El Capitan
      env: EXTRA='--enable-gui --enable-updater --enable-mac-integration --disable-opencl --enable-google-analytics' HOMEBREW_EXTRA='tschoonj/tap/gtkmm-plplot json-glib gtk-mac-integration' MYCC='/usr/local/opt/llvm/bin/clang' MYCXX='/usr/local/opt/llvm/bin/clang++' MYFC='gfortran' HOMEBREW_GCC='gcc llvm' MYLIBS='-L/usr/local/opt/llvm/lib -Wl,-rpath,/usr/local/opt/llvm/lib' BUILD_XRL_AND_EASYRNG_FROM_SOURCE='yes'

    # OS X 10.11 El Capitan: easyRNG
    # with gui
    # no updater
    # no mac-integration
    # with openCL
    # with google analytics
    - os: osx
      sudo: required
      osx_image: xcode7.3 # OS X 10.11 El Capitan
      env: EXTRA='--enable-gui --disable-updater --disable-mac-integration --enable-opencl --enable-google-analytics' HOMEBREW_EXTRA='tschoonj/tap/gtkmm-plplot' MYCC='/usr/local/opt/llvm/bin/clang' MYCXX='/usr/local/opt/llvm/bin/clang++' MYFC='gfortran' HOMEBREW_GCC='gcc llvm' MYLIBS='-L/usr/local/opt/llvm/lib -Wl,-rpath,/usr/local/opt/llvm/lib' BUILD_XRL_AND_EASYRNG_FROM_SOURCE='yes'

    # OS X 10.11 El Capitan: easyRNG
    # with gui
    # with updater
    # with mac-integration
    # with openCL
    # with google analytics
    - os: osx
      sudo: required
      osx_image: xcode7.3 # OS X 10.11 El Capitan
      env: EXTRA='--enable-gui --enable-updater --enable-mac-integration --enable-opencl --enable-google-analytics' HOMEBREW_EXTRA='tschoonj/tap/gtkmm-plplot json-glib gtk-mac-integration' MYCC='/usr/local/opt/llvm/bin/clang' MYCXX='/usr/local/opt/llvm/bin/clang++' MYFC='gfortran' HOMEBREW_GCC='gcc llvm' MYLIBS='-L/usr/local/opt/llvm/lib -Wl,-rpath,/usr/local/opt/llvm/lib' BUILD_XRL_AND_EASYRNG_FROM_SOURCE='yes'


before_install:
  - |
    if [ "$TRAVIS_OS_NAME" == "osx" ] ; then
      brew cask uninstall --force oclint
      brew uninstall --force --ignore-dependencies $(brew list) || exit 1
      brew update || exit 1
      brew cleanup -s || exit 1
      rm -rf $(brew --cache) || exit 1
      brew install git gsl autoconf automake libtool libxslt hdf5 libsoup wget || exit 1
      brew install $HOMEBREW_GCC || exit 1
      brew install $HOMEBREW_EXTRA librsvg || exit 1
      export CC=$MYCC
      export OBJC=$MYCC
      export CXX=$MYCXX
      export FC=$MYFC
      export LIBS=$MYLIBS
      brew cleanup -s || exit 1
      rm -rf $(brew --cache) || exit 1
      if [ -n "$GTKMM_PLPLOT_BRANCH" ] ; then
        brew uninstall --force gtkmm-plplot
      fi
    fi

install:
  - |
    if [ "$BUILD_XRL_AND_EASYRNG_FROM_SOURCE" == "yes" ] || [ "$BUILD_XRL_FROM_SOURCE" == "yes" ] || [ "$BUILD_XRL_AND_FGSL_FROM_SOURCE" == "yes" ] ; then
      wget https://xraylib.tomschoonjans.eu/xraylib-3.3.0.tar.gz || exit 1
      tar xfz xraylib-3.3.0.tar.gz || exit 1
      cd xraylib-3.3.0
      ./configure --enable-fortran2003 --disable-static || exit 1
      make -j2 || exit 1
      sudo make install || exit 1
      cd ..
    fi
    if [ "$BUILD_XRL_AND_EASYRNG_FROM_SOURCE" == "yes" ] || [ "$BUILD_EASYRNG_FROM_SOURCE" == "yes" ] ; then
      wget https://github.com/tschoonj/easyRNG/releases/download/easyRNG-1.1/easyRNG-1.1.tar.gz || exit 1
      tar xfz easyRNG-1.1.tar.gz || exit 1
      cd easyRNG-1.1
      ./configure --enable-fortran --disable-static || exit 1
      make -j2 || exit 1
      sudo make install || exit 1
      cd ..
    fi
    if [ "$BUILD_XRL_AND_FGSL_FROM_SOURCE" == "yes" ] || [ "$BUILD_FGSL_FROM_SOURCE" == "yes" ] ; then
      wget http://www.lrz.de/services/software/mathematik/gsl/fortran/download/fgsl-1.2.0.tar.gz || exit 1
      tar xfz fgsl-1.2.0.tar.gz || exit 1
      cd fgsl-1.2.0
      ./configure --disable-static || exit 1
      make || exit 1
      sudo make install || exit 1
      cd ..
    fi
    if [ -n "$GTKMM_PLPLOT_BRANCH" ] ; then
      git clone -b $GTKMM_PLPLOT_BRANCH --single-branch --depth=1 https://github.com/tschoonj/gtkmm-plplot.git
      cd gtkmm-plplot
      autoreconf -i
      ./configure --disable-static
      make -j2
      sudo make install
      cd ..
    fi



script:
  - autoreconf -fi || exit 1
  - ./configure ${EXTRA} --disable-static || exit 1
  - make || exit 1
  - make check || exit 1
  - if [ "$TRAVIS_OS_NAME" == "linux" ] ; then make distcheck || exit 1 ; fi

notifications:
  email:
    recipients:
      - Tom.Schoonjans@me.com
    on_success: never
    on_failure: always

branches:
  only:
    - master

